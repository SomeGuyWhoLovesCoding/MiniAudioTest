<xml>
	<pragma once="true" />

	<!-- <set name="HL_DEFINE" if="HASHLINK windows" /> -->
	<!-- Switch to this if compiling with `haxelib run hxcpp miniaudioBuild.xml`! -->
	<set name="HL_DEFINE" value="1" />

	<set name="PROJECT_DIR" value="${this_dir}/Source" />
	<set name="HASHLINK" value="F:/jerem/Downloads+/hl-1.12" if="HL_DEFINE" />
	<set name="HL_INCLUDE" value="${HASHLINK}/include" if="HL_DEFINE" />
	<set name="HL_BIN" value="${HASHLINK}" if="HL_DEFINE" />

	<echo value="hashlink: ${HASHLINK}" />
    <echo value="hashlink include: ${HL_INCLUDE}" />
    <echo value="hashlink bin: ${HL_BIN}" />

	<files id="miniaudio">
		<compilerflag value="-I${PROJECT_DIR}/miniaudio" />
		<compilerflag value="-I${PROJECT_DIR}/miniaudio/include" />
		<compilerflag value="-I${PROJECT_DIR}/miniaudio/signalsmith-stretch" />
		<file name="${PROJECT_DIR}/miniaudio/ma_thing.cpp" />
		<compilerflag value="-I${HASHLINK}/include" />
	</files>

	<target id="default" output="ma_thing" toolid="dll" tool="linker" if="HL_DEFINE">
		<section if="mingw || macos || linux">
			<lib name="-lpthread" />
		</section>

		<files id="miniaudio" />
		<libpath name="${HASHLINK}" if="windows" />
		<libpath name="/usr/local/lib" if='macos' />
		<lib name="libhl.lib" if="windows" />
		<lib name="-lhl" unless="windows" />
		<ext value=".hdll" />
		<outdir name="Export/hl/bin" />
	</target>

	<target id="haxe">
		<files id="miniaudio" />
	</target>
</xml>